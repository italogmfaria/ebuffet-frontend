<app-model-page [title]="eventTitle" class="ion-page" (backClick)="onBackClick()">
  <div class="event-edit-page">
    <ion-grid>
      <!-- Seção de Cardápio -->
      <div class="section">
        <h3 class="section-title">Comidas:</h3>
        <div class="items-list">
          <app-order-item-card
            *ngFor="let item of menuItems"
            [title]="item.title"
            [description]="item.description"
            [imageUrl]="item.imageUrl || ''"
            (cardClick)="onFoodItemClick(item)"
            (removeClick)="onRemoveFood(item.title)">
          </app-order-item-card>
        </div>

        <div class="button-container">
          <app-primary-button
            [text]="'Adicionar comidas'"
            (buttonClick)="onAddFoods()">
          </app-primary-button>
        </div>
      </div>

      <!-- Seção de Serviços -->
      <div class="section">
        <h3 class="section-title">Serviços:</h3>
        <div class="items-list">
          <app-order-item-card
            *ngFor="let service of services"
            [title]="service.title"
            [description]="service.description"
            [imageUrl]="service.imageUrl || ''"
            (cardClick)="onServiceItemClick(service)"
            (removeClick)="onRemoveService(service.title)">
          </app-order-item-card>
        </div>

        <div class="button-container">
          <app-primary-button
            [text]="'Adicionar serviços'"
            (buttonClick)="onAddServices()">
          </app-primary-button>
        </div>
      </div>

      <!-- Seção de Informações do Evento -->
      <div class="section">
        <app-text-input
          [label]="'Nome do evento:'"
          [placeholder]="'Digite o nome do evento'"
          [maxlength]="100"
          [showCounter]="true"
          [(ngModel)]="eventName">
        </app-text-input>

        <app-textarea-input
          [label]="'Descrição do evento:'"
          [placeholder]="'Digite sobre qual intuito do evento'"
          [rows]="5"
          [maxlength]="255"
          [showCounter]="true"
          [(ngModel)]="eventDescription">
        </app-textarea-input>
      </div>

      <!-- Seção de Data e Hora de Início -->
      <div class="section">
        <h3 class="section-title">Data e Hora de Início</h3>

        <app-text-input
          [label]="'Data de início:'"
          [type]="'date'"
          [placeholder]="'Digite a data de início'"
          [(ngModel)]="eventStartDate">
        </app-text-input>

        <app-text-input
          [label]="'Hora de início:'"
          [type]="'time'"
          [placeholder]="'Digite a hora de início'"
          [(ngModel)]="eventStartTime">
        </app-text-input>
      </div>

      <!-- Seção de Data e Hora de Fim -->
      <div class="section">
        <h3 class="section-title">Data e Hora de Fim</h3>

        <app-text-input
          [label]="'Data de fim:'"
          [type]="'date'"
          [placeholder]="'Digite a data de fim'"
          [(ngModel)]="eventEndDate">
        </app-text-input>

        <app-text-input
          [label]="'Hora de fim:'"
          [type]="'time'"
          [placeholder]="'Digite a hora de fim'"
          [(ngModel)]="eventEndTime">
        </app-text-input>
      </div>

      <!-- Seção de Valor -->
      <div class="section medium-section">
        <app-text-input
          [label]="'Valor do evento:'"
          [type]="'number'"
          [placeholder]="'Digite o valor'"
          [(ngModel)]="eventValue">
        </app-text-input>

        <app-text-input
          [label]="'Quantidade de pessoas:'"
          [type]="'number'"
          [placeholder]="'Digite a quantidade de pessoas'"
          [(ngModel)]="peopleCount">
        </app-text-input>
      </div>

      <!-- Seção de Endereço -->
      <div class="section last-section">
        <app-text-input
          [label]="'Rua:'"
          [placeholder]="'Digite a rua'"
          [(ngModel)]="street">
        </app-text-input>

        <app-text-input
          [label]="'Número:'"
          [placeholder]="'Digite o número de residência'"
          [(ngModel)]="number">
        </app-text-input>

        <app-text-input
          [label]="'Complemento:'"
          [placeholder]="'Digite o complemento'"
          [(ngModel)]="complement">
        </app-text-input>

        <app-text-input
          [label]="'Bairro:'"
          [placeholder]="'Digite o bairro'"
          [(ngModel)]="neighborhood">
        </app-text-input>

        <app-text-input
          [label]="'Cidade:'"
          [placeholder]="'Digite a cidade'"
          [(ngModel)]="city">
        </app-text-input>

        <app-selected-input
          [label]="'Estado:'"
          [placeholder]="'Selecione o estado'"
          [options]="stateOptions"
          [(ngModel)]="state"
          (inputClick)="onStateInputClick()">
        </app-selected-input>

        <app-text-input
          [label]="'CEP:'"
          [placeholder]="'Digite o CEP'"
          [maxlength]="9"
          [inputmode]="'numeric'"
          [(ngModel)]="zipCode"
          (inputChange)="onZipCodeChange($event)"
          (keypress)="onZipCodeKeyPress($event)">
        </app-text-input>
      </div>

      <!-- Botão Salvar -->
      <div class="save-button-container">
        <app-primary-button
          [text]="isSaving ? 'Salvando...' : 'Salvar'"
          [disabled]="!isFormValid || isSaving"
          (buttonClick)="onSave()">
        </app-primary-button>
      </div>
    </ion-grid>
  </div>
</app-model-page>

<!-- Modal de Seleção de Estado -->
<app-select-modal
  *ngIf="showStateModal"
  [title]="'Selecione o Estado'"
  [options]="stateOptions"
  [selectedValue]="state"
  (close)="showStateModal = false"
  (optionSelected)="onStateSelected($event)">
</app-select-modal>

<!-- Modal de Confirmação para Remover Comida -->
<app-confirmation-modal
  *ngIf="showRemoveFoodModal"
  [title]="'Remover comida?'"
  [subtitle]="'Tem certeza que deseja<br>remover esta comida do evento?'"
  [icon]="'trash'"
  [iconColor]="'#fff'"
  (close)="onRemoveFoodModalClose()"
  (cancel)="onRemoveFoodModalCancel()"
  (confirm)="onRemoveFoodModalConfirm()">
</app-confirmation-modal>

<!-- Modal de Confirmação para Remover Serviço -->
<app-confirmation-modal
  *ngIf="showRemoveServiceModal"
  [title]="'Remover serviço?'"
  [subtitle]="'Tem certeza que deseja<br>remover este serviço do evento?'"
  [icon]="'trash'"
  [iconColor]="'#fff'"
  (close)="onRemoveServiceModalClose()"
  (cancel)="onRemoveServiceModalCancel()"
  (confirm)="onRemoveServiceModalConfirm()">
</app-confirmation-modal>
