<app-model-page [title]="pageTitle" class="ion-page" (backClick)="onBackClick()">
  <div class="service-form-page">
    <!-- Image Upload Section -->
    <div class="image-upload-container">
      <ng-container *ngIf="imagePreview; else placeholder">
        <ion-img [src]="imagePreview" alt="Service image" class="uploaded-image"></ion-img>
      </ng-container>
      <ng-template #placeholder>
        <app-image-placeholder></app-image-placeholder>
      </ng-template>

      <app-image-circle
        [size]="'large'"
        [customColor]="(secondaryColor$ | async) || '#8b5cf6'"
        (buttonClick)="onImageSelect()">
      </app-image-circle>
      <input
        #fileInput
        type="file"
        accept="image/*"
        style="display: none;"
        (change)="onFileSelected($event)">
    </div>

    <!-- Form Fields -->
    <div class="form-content">
      <app-text-input
        [label]="'Nome:'"
        [placeholder]="'Digite o nome do serviço'"
        [maxlength]="20"
        [showCounter]="true"
        [(ngModel)]="serviceName">
      </app-text-input>

      <app-textarea-input
        [label]="'Descrição:'"
        [placeholder]="'Digite sobre detalhes do serviço'"
        [rows]="5"
        [maxlength]="255"
        [showCounter]="true"
        [(ngModel)]="serviceDescription">
      </app-textarea-input>

      <app-selected-input
        [label]="'Categoria:'"
        [placeholder]="'Defina a categoria do serviço'"
        [options]="categoryOptions"
        [(ngModel)]="selectedCategory"
        (inputClick)="onCategoryClick()">
      </app-selected-input>
    </div>

    <!-- Action Buttons -->
    <div class="button-container">
      <app-primary-button
        [text]="isEditMode ? 'Salvar' : 'Salvar'"
        [customColor]="(secondaryColor$ | async) || '#8b5cf6'"
        (buttonClick)="onSubmit()">
      </app-primary-button>

      <app-primary-button
        *ngIf="isEditMode"
        [text]="'Excluir'"
        [customColor]="'#DC2626'"
        (buttonClick)="onDeleteClick()">
      </app-primary-button>
    </div>
  </div>
</app-model-page>

<app-confirmation-modal
  *ngIf="showDeleteModal"
  [title]="'Excluir Serviço?'"
  [subtitle]="'Tem certeza que deseja excluir<br>&quot;' + serviceName + '&quot;?'"
  [icon]="'help'"
  [iconColor]="'#fff'"
  [outlineButtonText]="'Sim'"
  [primaryButtonText]="'Não'"
  (close)="onDeleteModalClose()"
  (confirm)="onDeleteModalConfirm()"
  (cancel)="onDeleteModalCancel()">
</app-confirmation-modal>

<app-select-modal
  *ngIf="showCategoryModal"
  [title]="'Selecione a Categoria'"
  [options]="categoryOptions"
  [selectedValue]="selectedCategory"
  (close)="onCategoryModalClose()"
  (select)="onCategorySelect($event)">
</app-select-modal>

